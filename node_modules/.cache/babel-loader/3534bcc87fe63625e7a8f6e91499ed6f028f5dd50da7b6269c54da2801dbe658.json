{"ast":null,"code":"// src/services/analyticsService.js\n// Browser-compatible analytics service\n// You'll need to install: npm install amplitude-js mixpanel-browser\n\nclass AnalyticsService {\n  constructor() {\n    this.initialized = false;\n    this.providers = [];\n    this.amplitude = null;\n    this.mixpanel = null;\n  }\n  async init() {\n    if (this.initialized) return;\n\n    // Only initialize in production or when testing analytics\n    if (process.env.NODE_ENV === 'production' || process.env.REACT_APP_ENABLE_ANALYTICS === 'true') {\n      try {\n        // Initialize Amplitude\n        if (process.env.REACT_APP_AMPLITUDE_API_KEY) {\n          // Dynamic import for better code splitting\n          const amplitude = await import('amplitude-js');\n          this.amplitude = amplitude.default.getInstance();\n          this.amplitude.init(process.env.REACT_APP_AMPLITUDE_API_KEY);\n          this.providers.push('amplitude');\n        }\n\n        // Initialize Mixpanel\n        if (process.env.REACT_APP_MIXPANEL_TOKEN) {\n          // Dynamic import for better code splitting\n          const mixpanel = await import('mixpanel-browser');\n          this.mixpanel = mixpanel.default;\n          this.mixpanel.init(process.env.REACT_APP_MIXPANEL_TOKEN);\n          this.providers.push('mixpanel');\n        }\n        this.initialized = true;\n        console.log('Analytics initialized with providers:', this.providers);\n      } catch (error) {\n        console.error('Failed to initialize analytics:', error);\n        // Fail gracefully\n        this.initialized = false;\n      }\n    }\n  }\n\n  // Set user properties\n  identify(userId, userProperties = {}) {\n    if (!this.initialized) return;\n    if (this.providers.includes('amplitude') && this.amplitude) {\n      this.amplitude.setUserId(userId);\n      this.amplitude.setUserProperties(userProperties);\n    }\n    if (this.providers.includes('mixpanel') && this.mixpanel) {\n      this.mixpanel.identify(userId);\n      this.mixpanel.people.set(userProperties);\n    }\n  }\n\n  // Track events\n  trackEvent(eventName, eventProperties = {}) {\n    if (!this.initialized) return;\n    if (this.providers.includes('amplitude') && this.amplitude) {\n      this.amplitude.logEvent(eventName, eventProperties);\n    }\n    if (this.providers.includes('mixpanel') && this.mixpanel) {\n      this.mixpanel.track(eventName, eventProperties);\n    }\n    console.log(`[Analytics] Tracked event: ${eventName}`, eventProperties);\n  }\n\n  // Subscription-specific tracking methods\n  trackSubscriptionStarted(planId, price, platform, isNewUser = true) {\n    this.trackEvent('subscription_started', {\n      plan_id: planId,\n      price,\n      platform,\n      is_new_user: isNewUser\n    });\n  }\n  trackSubscriptionCancelled(planId, reason, daysSinceSubscribed) {\n    this.trackEvent('subscription_cancelled', {\n      plan_id: planId,\n      reason,\n      days_since_subscribed: daysSinceSubscribed\n    });\n  }\n  trackSubscriptionRenewed(planId, renewalCount) {\n    this.trackEvent('subscription_renewed', {\n      plan_id: planId,\n      renewal_count: renewalCount\n    });\n  }\n  trackCodeActivated(platform, daysRemaining) {\n    this.trackEvent('code_activated', {\n      platform,\n      days_remaining: daysRemaining\n    });\n  }\n  trackPremiumFeatureUsed(featureName) {\n    this.trackEvent('premium_feature_used', {\n      feature_name: featureName\n    });\n  }\n  trackSubscriptionPageView(source) {\n    this.trackEvent('subscription_page_viewed', {\n      source\n    });\n  }\n\n  // Clear user data on logout\n  clearUserData() {\n    if (!this.initialized) return;\n    if (this.providers.includes('amplitude') && this.amplitude) {\n      this.amplitude.setUserId(null);\n      this.amplitude.regenerateDeviceId();\n    }\n    if (this.providers.includes('mixpanel') && this.mixpanel) {\n      this.mixpanel.reset();\n    }\n  }\n}\nconst analyticsService = new AnalyticsService();\n// Initialize asynchronously \nanalyticsService.init();\nexport default analyticsService;","map":{"version":3,"names":["AnalyticsService","constructor","initialized","providers","amplitude","mixpanel","init","process","env","NODE_ENV","REACT_APP_ENABLE_ANALYTICS","REACT_APP_AMPLITUDE_API_KEY","default","getInstance","push","REACT_APP_MIXPANEL_TOKEN","console","log","error","identify","userId","userProperties","includes","setUserId","setUserProperties","people","set","trackEvent","eventName","eventProperties","logEvent","track","trackSubscriptionStarted","planId","price","platform","isNewUser","plan_id","is_new_user","trackSubscriptionCancelled","reason","daysSinceSubscribed","days_since_subscribed","trackSubscriptionRenewed","renewalCount","renewal_count","trackCodeActivated","daysRemaining","days_remaining","trackPremiumFeatureUsed","featureName","feature_name","trackSubscriptionPageView","source","clearUserData","regenerateDeviceId","reset","analyticsService"],"sources":["C:/Users/juliu/Desktop/web/src/services/analyticsService.js"],"sourcesContent":["// src/services/analyticsService.js\r\n// Browser-compatible analytics service\r\n// You'll need to install: npm install amplitude-js mixpanel-browser\r\n\r\nclass AnalyticsService {\r\n  constructor() {\r\n    this.initialized = false;\r\n    this.providers = [];\r\n    this.amplitude = null;\r\n    this.mixpanel = null;\r\n  }\r\n\r\n  async init() {\r\n    if (this.initialized) return;\r\n    \r\n    // Only initialize in production or when testing analytics\r\n    if (process.env.NODE_ENV === 'production' || process.env.REACT_APP_ENABLE_ANALYTICS === 'true') {\r\n      try {\r\n        // Initialize Amplitude\r\n        if (process.env.REACT_APP_AMPLITUDE_API_KEY) {\r\n          // Dynamic import for better code splitting\r\n          const amplitude = await import('amplitude-js');\r\n          this.amplitude = amplitude.default.getInstance();\r\n          this.amplitude.init(process.env.REACT_APP_AMPLITUDE_API_KEY);\r\n          this.providers.push('amplitude');\r\n        }\r\n        \r\n        // Initialize Mixpanel\r\n        if (process.env.REACT_APP_MIXPANEL_TOKEN) {\r\n          // Dynamic import for better code splitting\r\n          const mixpanel = await import('mixpanel-browser');\r\n          this.mixpanel = mixpanel.default;\r\n          this.mixpanel.init(process.env.REACT_APP_MIXPANEL_TOKEN);\r\n          this.providers.push('mixpanel');\r\n        }\r\n        \r\n        this.initialized = true;\r\n        console.log('Analytics initialized with providers:', this.providers);\r\n      } catch (error) {\r\n        console.error('Failed to initialize analytics:', error);\r\n        // Fail gracefully\r\n        this.initialized = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  // Set user properties\r\n  identify(userId, userProperties = {}) {\r\n    if (!this.initialized) return;\r\n    \r\n    if (this.providers.includes('amplitude') && this.amplitude) {\r\n      this.amplitude.setUserId(userId);\r\n      this.amplitude.setUserProperties(userProperties);\r\n    }\r\n    \r\n    if (this.providers.includes('mixpanel') && this.mixpanel) {\r\n      this.mixpanel.identify(userId);\r\n      this.mixpanel.people.set(userProperties);\r\n    }\r\n  }\r\n\r\n  // Track events\r\n  trackEvent(eventName, eventProperties = {}) {\r\n    if (!this.initialized) return;\r\n    \r\n    if (this.providers.includes('amplitude') && this.amplitude) {\r\n      this.amplitude.logEvent(eventName, eventProperties);\r\n    }\r\n    \r\n    if (this.providers.includes('mixpanel') && this.mixpanel) {\r\n      this.mixpanel.track(eventName, eventProperties);\r\n    }\r\n    \r\n    console.log(`[Analytics] Tracked event: ${eventName}`, eventProperties);\r\n  }\r\n\r\n  // Subscription-specific tracking methods\r\n  trackSubscriptionStarted(planId, price, platform, isNewUser = true) {\r\n    this.trackEvent('subscription_started', {\r\n      plan_id: planId,\r\n      price,\r\n      platform,\r\n      is_new_user: isNewUser\r\n    });\r\n  }\r\n\r\n  trackSubscriptionCancelled(planId, reason, daysSinceSubscribed) {\r\n    this.trackEvent('subscription_cancelled', {\r\n      plan_id: planId,\r\n      reason,\r\n      days_since_subscribed: daysSinceSubscribed\r\n    });\r\n  }\r\n\r\n  trackSubscriptionRenewed(planId, renewalCount) {\r\n    this.trackEvent('subscription_renewed', {\r\n      plan_id: planId,\r\n      renewal_count: renewalCount\r\n    });\r\n  }\r\n\r\n  trackCodeActivated(platform, daysRemaining) {\r\n    this.trackEvent('code_activated', {\r\n      platform,\r\n      days_remaining: daysRemaining\r\n    });\r\n  }\r\n\r\n  trackPremiumFeatureUsed(featureName) {\r\n    this.trackEvent('premium_feature_used', {\r\n      feature_name: featureName\r\n    });\r\n  }\r\n\r\n  trackSubscriptionPageView(source) {\r\n    this.trackEvent('subscription_page_viewed', {\r\n      source\r\n    });\r\n  }\r\n\r\n  // Clear user data on logout\r\n  clearUserData() {\r\n    if (!this.initialized) return;\r\n    \r\n    if (this.providers.includes('amplitude') && this.amplitude) {\r\n      this.amplitude.setUserId(null);\r\n      this.amplitude.regenerateDeviceId();\r\n    }\r\n    \r\n    if (this.providers.includes('mixpanel') && this.mixpanel) {\r\n      this.mixpanel.reset();\r\n    }\r\n  }\r\n}\r\n\r\nconst analyticsService = new AnalyticsService();\r\n// Initialize asynchronously \r\nanalyticsService.init();\r\n\r\nexport default analyticsService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}