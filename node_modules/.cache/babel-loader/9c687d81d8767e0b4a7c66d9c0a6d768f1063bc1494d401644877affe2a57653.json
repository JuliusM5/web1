{"ast":null,"code":"// Add this to your serviceWorkerRegistration.js\n\n// Implement enhanced caching strategy for flight deals\nconst FLIGHT_CACHE_NAME = 'flight-deals-cache-v1';\nconst FLIGHT_CACHE_DURATION = 60 * 60 * 1000; // 1 hour\n\n// Configure cache strategies for different types of requests\nself.addEventListener('fetch', event => {\n  // Handle API requests differently from static assets\n  if (event.request.url.includes('api.skyscanner')) {\n    // Advanced caching strategy for Skyscanner API\n    event.respondWith(cacheFirstWithRefresh(event.request));\n  } else {\n    // Regular caching for other resources\n    event.respondWith(caches.match(event.request).then(response => {\n      return response || fetch(event.request).then(fetchResponse => {\n        return caches.open('static-cache-v1').then(cache => {\n          cache.put(event.request, fetchResponse.clone());\n          return fetchResponse;\n        });\n      });\n    }));\n  }\n});\n\n// Smart caching that reduces API calls but keeps data fresh\nasync function cacheFirstWithRefresh(request) {\n  const cachedResponse = await caches.match(request);\n  const fetchPromise = fetch(request).then(async networkResponse => {\n    const cache = await caches.open(FLIGHT_CACHE_NAME);\n    cache.put(request, networkResponse.clone());\n    return networkResponse;\n  });\n  return cachedResponse || fetchPromise;\n}","map":{"version":3,"names":["FLIGHT_CACHE_NAME","FLIGHT_CACHE_DURATION","self","addEventListener","event","request","url","includes","respondWith","cacheFirstWithRefresh","caches","match","then","response","fetch","fetchResponse","open","cache","put","clone","cachedResponse","fetchPromise","networkResponse"],"sources":["C:/Users/juliu/Desktop/web/src/serviceWorkerRegistration.js"],"sourcesContent":["// Add this to your serviceWorkerRegistration.js\r\n\r\n// Implement enhanced caching strategy for flight deals\r\nconst FLIGHT_CACHE_NAME = 'flight-deals-cache-v1';\r\nconst FLIGHT_CACHE_DURATION = 60 * 60 * 1000; // 1 hour\r\n\r\n// Configure cache strategies for different types of requests\r\nself.addEventListener('fetch', (event) => {\r\n  // Handle API requests differently from static assets\r\n  if (event.request.url.includes('api.skyscanner')) {\r\n    // Advanced caching strategy for Skyscanner API\r\n    event.respondWith(\r\n      cacheFirstWithRefresh(event.request)\r\n    );\r\n  } else {\r\n    // Regular caching for other resources\r\n    event.respondWith(\r\n      caches.match(event.request).then((response) => {\r\n        return response || fetch(event.request).then((fetchResponse) => {\r\n          return caches.open('static-cache-v1').then((cache) => {\r\n            cache.put(event.request, fetchResponse.clone());\r\n            return fetchResponse;\r\n          });\r\n        });\r\n      })\r\n    );\r\n  }\r\n});\r\n\r\n// Smart caching that reduces API calls but keeps data fresh\r\nasync function cacheFirstWithRefresh(request) {\r\n  const cachedResponse = await caches.match(request);\r\n  const fetchPromise = fetch(request).then(async (networkResponse) => {\r\n    const cache = await caches.open(FLIGHT_CACHE_NAME);\r\n    cache.put(request, networkResponse.clone());\r\n    return networkResponse;\r\n  });\r\n  \r\n  return cachedResponse || fetchPromise;\r\n}"],"mappings":"AAAA;;AAEA;AACA,MAAMA,iBAAiB,GAAG,uBAAuB;AACjD,MAAMC,qBAAqB,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC;;AAE9C;AACAC,IAAI,CAACC,gBAAgB,CAAC,OAAO,EAAGC,KAAK,IAAK;EACxC;EACA,IAAIA,KAAK,CAACC,OAAO,CAACC,GAAG,CAACC,QAAQ,CAAC,gBAAgB,CAAC,EAAE;IAChD;IACAH,KAAK,CAACI,WAAW,CACfC,qBAAqB,CAACL,KAAK,CAACC,OAAO,CACrC,CAAC;EACH,CAAC,MAAM;IACL;IACAD,KAAK,CAACI,WAAW,CACfE,MAAM,CAACC,KAAK,CAACP,KAAK,CAACC,OAAO,CAAC,CAACO,IAAI,CAAEC,QAAQ,IAAK;MAC7C,OAAOA,QAAQ,IAAIC,KAAK,CAACV,KAAK,CAACC,OAAO,CAAC,CAACO,IAAI,CAAEG,aAAa,IAAK;QAC9D,OAAOL,MAAM,CAACM,IAAI,CAAC,iBAAiB,CAAC,CAACJ,IAAI,CAAEK,KAAK,IAAK;UACpDA,KAAK,CAACC,GAAG,CAACd,KAAK,CAACC,OAAO,EAAEU,aAAa,CAACI,KAAK,CAAC,CAAC,CAAC;UAC/C,OAAOJ,aAAa;QACtB,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ,CAAC,CACH,CAAC;EACH;AACF,CAAC,CAAC;;AAEF;AACA,eAAeN,qBAAqBA,CAACJ,OAAO,EAAE;EAC5C,MAAMe,cAAc,GAAG,MAAMV,MAAM,CAACC,KAAK,CAACN,OAAO,CAAC;EAClD,MAAMgB,YAAY,GAAGP,KAAK,CAACT,OAAO,CAAC,CAACO,IAAI,CAAC,MAAOU,eAAe,IAAK;IAClE,MAAML,KAAK,GAAG,MAAMP,MAAM,CAACM,IAAI,CAAChB,iBAAiB,CAAC;IAClDiB,KAAK,CAACC,GAAG,CAACb,OAAO,EAAEiB,eAAe,CAACH,KAAK,CAAC,CAAC,CAAC;IAC3C,OAAOG,eAAe;EACxB,CAAC,CAAC;EAEF,OAAOF,cAAc,IAAIC,YAAY;AACvC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}