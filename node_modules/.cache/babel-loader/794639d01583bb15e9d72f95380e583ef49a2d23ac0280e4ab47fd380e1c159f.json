{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\juliu\\\\Desktop\\\\web\\\\src\\\\components\\\\Subscription\\\\PremiumContentGuard.jsx\",\n  _s = $RefreshSig$();\n// src/components/Subscription/PremiumContentGuard.jsx\nimport React, { useState, useEffect } from 'react';\nimport { useSubscription } from '../../hooks/useSubscription';\nimport MobileCodeActivation from './MobileCodeActivation';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst PremiumContentGuard = ({\n  children,\n  featureName = 'premium',\n  fallbackMessage = 'This content requires a premium subscription',\n  showActivationForm = true\n}) => {\n  _s();\n  const {\n    isFeatureAvailable,\n    hasActiveSubscription\n  } = useSubscription();\n  const [canAccess, setCanAccess] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const [showActivation, setShowActivation] = useState(false);\n\n  // Check if the user has access to this feature\n  useEffect(() => {\n    const checkAccess = async () => {\n      setIsLoading(true);\n      try {\n        const hasAccess = await isFeatureAvailable(featureName);\n        setCanAccess(hasAccess);\n      } catch (error) {\n        console.error(`Error checking access to feature \"${featureName}\":`, error);\n        setCanAccess(false);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    checkAccess();\n  }, [featureName, isFeatureAvailable, hasActiveSubscription]);\n\n  // Show loading state\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"premium-content-loading\",\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 12\n    }, this);\n  }\n\n  // Show content if user has access\n  if (canAccess) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: children\n    }, void 0, false);\n  }\n\n  // Show activation form if requested\n  if (showActivation) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"premium-activation-container\",\n      children: /*#__PURE__*/_jsxDEV(MobileCodeActivation, {\n        onSuccess: () => setCanAccess(true),\n        onCancel: () => setShowActivation(false)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Show fallback content\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"premium-content-restricted\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"premium-message\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: fallbackMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Unlock this feature and more with a premium subscription.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), showActivationForm && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"premium-actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"primary-button\",\n          onClick: () => setShowActivation(true),\n          children: \"Enter Activation Code\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/subscription\",\n          className: \"subscription-link\",\n          children: \"Get a Subscription\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n};\n_s(PremiumContentGuard, \"fAoUplAjVdc0Y79NB8+f4P+PBd4=\", false, function () {\n  return [useSubscription];\n});\n_c = PremiumContentGuard;\nexport default PremiumContentGuard;\nvar _c;\n$RefreshReg$(_c, \"PremiumContentGuard\");","map":{"version":3,"names":["React","useState","useEffect","useSubscription","MobileCodeActivation","jsxDEV","_jsxDEV","Fragment","_Fragment","PremiumContentGuard","children","featureName","fallbackMessage","showActivationForm","_s","isFeatureAvailable","hasActiveSubscription","canAccess","setCanAccess","isLoading","setIsLoading","showActivation","setShowActivation","checkAccess","hasAccess","error","console","className","fileName","_jsxFileName","lineNumber","columnNumber","onSuccess","onCancel","onClick","href","_c","$RefreshReg$"],"sources":["C:/Users/juliu/Desktop/web/src/components/Subscription/PremiumContentGuard.jsx"],"sourcesContent":["// src/components/Subscription/PremiumContentGuard.jsx\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useSubscription } from '../../hooks/useSubscription';\r\nimport MobileCodeActivation from './MobileCodeActivation';\r\n\r\nconst PremiumContentGuard = ({ \r\n  children, \r\n  featureName = 'premium',\r\n  fallbackMessage = 'This content requires a premium subscription',\r\n  showActivationForm = true\r\n}) => {\r\n  const { isFeatureAvailable, hasActiveSubscription } = useSubscription();\r\n  const [canAccess, setCanAccess] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [showActivation, setShowActivation] = useState(false);\r\n  \r\n  // Check if the user has access to this feature\r\n  useEffect(() => {\r\n    const checkAccess = async () => {\r\n      setIsLoading(true);\r\n      try {\r\n        const hasAccess = await isFeatureAvailable(featureName);\r\n        setCanAccess(hasAccess);\r\n      } catch (error) {\r\n        console.error(`Error checking access to feature \"${featureName}\":`, error);\r\n        setCanAccess(false);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n    \r\n    checkAccess();\r\n  }, [featureName, isFeatureAvailable, hasActiveSubscription]);\r\n  \r\n  // Show loading state\r\n  if (isLoading) {\r\n    return <div className=\"premium-content-loading\">Loading...</div>;\r\n  }\r\n  \r\n  // Show content if user has access\r\n  if (canAccess) {\r\n    return <>{children}</>;\r\n  }\r\n  \r\n  // Show activation form if requested\r\n  if (showActivation) {\r\n    return (\r\n      <div className=\"premium-activation-container\">\r\n        <MobileCodeActivation \r\n          onSuccess={() => setCanAccess(true)} \r\n          onCancel={() => setShowActivation(false)} \r\n        />\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  // Show fallback content\r\n  return (\r\n    <div className=\"premium-content-restricted\">\r\n      <div className=\"premium-message\">\r\n        <h3>{fallbackMessage}</h3>\r\n        <p>Unlock this feature and more with a premium subscription.</p>\r\n        {showActivationForm && (\r\n          <div className=\"premium-actions\">\r\n            <button \r\n              className=\"primary-button\"\r\n              onClick={() => setShowActivation(true)}\r\n            >\r\n              Enter Activation Code\r\n            </button>\r\n            <a href=\"/subscription\" className=\"subscription-link\">\r\n              Get a Subscription\r\n            </a>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PremiumContentGuard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}