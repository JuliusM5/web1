{"ast":null,"code":"import React,{useState,useEffect,useMemo}from'react';import DynamicCalendar from'../Calendar/DynamicCalendar';import{useI18n}from'../../utils/i18n';// Import the i18n hook\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ItineraryView(_ref){let{trip,tripTasks=[]}=_ref;const[selectedDate,setSelectedDate]=useState(null);const[dateEvents,setDateEvents]=useState([]);const[dailyItinerary,setDailyItinerary]=useState({});// Get i18n functionality\nconst{t}=useI18n();// Set selected date to trip start date initially\nuseEffect(()=>{if(trip&&trip.startDate&&!selectedDate){setSelectedDate(trip.startDate);}},[trip,selectedDate]);// Create a structured daily itinerary from tasks - using useMemo to prevent recreation on every render\nconst structuredItinerary=useMemo(()=>{if(!tripTasks||tripTasks.length===0)return{};const itinerary={};// Group tasks by date\ntripTasks.forEach(task=>{if(task.date){if(!itinerary[task.date]){itinerary[task.date]=[];}itinerary[task.date].push(task);}});// Also add trip.transports that have a date property\nif(trip.transports){trip.transports.forEach(transport=>{if(transport.date){if(!itinerary[transport.date]){itinerary[transport.date]=[];}itinerary[transport.date].push({...transport,text:`${transport.type}: ${transport.from} ${t('itinerary.to','to')} ${transport.to}`,category:'transportation'});}});}return itinerary;},[tripTasks,trip.transports,t]);// Only recreate when these dependencies change\n// Update itinerary state when the memoized value changes\nuseEffect(()=>{setDailyItinerary(structuredItinerary);},[structuredItinerary]);// Update events for selected date when either selectedDate or dailyItinerary changes\nuseEffect(()=>{if(selectedDate){setDateEvents(dailyItinerary[selectedDate]||[]);}},[selectedDate,dailyItinerary]);// Handle date selection in calendar\nconst handleDateSelect=date=>{setSelectedDate(date);// Events will be updated via the useEffect above\n};// Format date for display\nconst formatDate=dateString=>{if(!dateString)return'';const date=new Date(dateString);// Get browser locale or use 'en-US' as fallback\nconst userLocale=navigator.language||'en-US';return date.toLocaleDateString(userLocale,{weekday:'long',month:'long',day:'numeric',year:'numeric'});};// Add missing dates between start and end - memoized to avoid recreation on every render\nconst allDates=useMemo(()=>{if(!trip||!trip.startDate||!trip.endDate)return[];const dates=[];const currentDate=new Date(trip.startDate);const endDate=new Date(trip.endDate);while(currentDate<=endDate){dates.push(currentDate.toISOString().split('T')[0]);currentDate.setDate(currentDate.getDate()+1);}return dates;},[trip===null||trip===void 0?void 0:trip.startDate,trip===null||trip===void 0?void 0:trip.endDate]);// Only recalculate when dates change\n// Prepare task events for calendar once - memoized to prevent recreation on every render\nconst calendarEvents=useMemo(()=>{return tripTasks.filter(task=>task.date);},[tripTasks]);return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-800\",children:t('itinerary.title','Trip Itinerary')}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-3\",children:t('itinerary.tripCalendar','Trip Calendar')}),/*#__PURE__*/_jsx(DynamicCalendar,{startDate:trip.startDate,endDate:trip.endDate,events:calendarEvents// Use memoized events\n,onDateClick:handleDateSelect,selectedDate:selectedDate// Pass this explicitly\n})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-3\",children:t('itinerary.dailySchedule','Daily Schedule')}),selectedDate?/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border border-gray-200 rounded-lg overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-50 px-4 py-3 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"h5\",{className:\"font-medium text-blue-800\",children:formatDate(selectedDate)})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4\",children:dateEvents.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:dateEvents.sort((a,b)=>{// Sort by time if available, otherwise by priority\nif(a.time&&b.time)return a.time.localeCompare(b.time);// Sort by priority\nconst priorityOrder={high:0,medium:1,low:2};return(priorityOrder[a.priority]||1)-(priorityOrder[b.priority]||1);}).map((event,index)=>/*#__PURE__*/_jsxs(\"div\",{className:`p-3 rounded-lg ${event.category==='transportation'?'bg-green-50 border border-green-200':event.completed?'bg-gray-50 border border-gray-200':'bg-blue-50 border border-blue-200'}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"div\",{className:event.completed?'line-through text-gray-500':'font-medium',children:event.text}),event.time&&/*#__PURE__*/_jsx(\"div\",{className:\"text-sm bg-white px-2 py-0.5 rounded-full\",children:event.time})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex mt-2 text-xs\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-0.5 bg-white rounded-full capitalize\",children:t(`tasks.categories.${event.category}`,event.category)}),event.priority&&/*#__PURE__*/_jsx(\"span\",{className:`ml-2 px-2 py-0.5 rounded-full ${event.priority==='high'?'bg-red-100 text-red-800':event.priority==='medium'?'bg-yellow-100 text-yellow-800':'bg-green-100 text-green-800'}`,children:t(`tasks.priorities.${event.priority}`,event.priority)})]})]},`event-${event.id||''}-${selectedDate}-${index}`))}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:t('itinerary.noEvents','No events scheduled for this day.')}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400 mt-1\",children:t('itinerary.addEventsHint','Add tasks or events with this date to see them here.')})]})})]}):/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 p-4 rounded-lg text-center\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:t('itinerary.selectDatePrompt','Select a date on the calendar to view events.')})})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-3\",children:t('itinerary.completeItinerary','Complete Itinerary')}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white border border-gray-200 rounded-lg overflow-hidden\",children:allDates.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"divide-y divide-gray-200\",children:allDates.map((date,dateIndex)=>{var _dailyItinerary$date,_dailyItinerary$date2;return/*#__PURE__*/_jsxs(\"div\",{className:`${selectedDate===date?'bg-blue-50':''}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-3 font-medium flex justify-between cursor-pointer hover:bg-gray-50\",onClick:()=>handleDateSelect(date),children:[/*#__PURE__*/_jsx(\"span\",{children:formatDate(date)}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-500\",children:[((_dailyItinerary$date=dailyItinerary[date])===null||_dailyItinerary$date===void 0?void 0:_dailyItinerary$date.length)||0,\" \",t('itinerary.events','events')]})]}),selectedDate===date&&((_dailyItinerary$date2=dailyItinerary[date])===null||_dailyItinerary$date2===void 0?void 0:_dailyItinerary$date2.length)>0&&/*#__PURE__*/_jsx(\"div\",{className:\"p-3 space-y-2 border-t border-gray-100\",children:dailyItinerary[date].sort((a,b)=>{// Sort by time if available, otherwise by priority\nif(a.time&&b.time)return a.time.localeCompare(b.time);// Sort by priority\nconst priorityOrder={high:0,medium:1,low:2};return(priorityOrder[a.priority]||1)-(priorityOrder[b.priority]||1);}).map((event,eventIndex)=>/*#__PURE__*/_jsx(\"div\",{className:`p-2 text-sm rounded ${event.category==='transportation'?'bg-green-50':event.completed?'bg-gray-50':'bg-blue-50'}`,children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:event.completed?'line-through text-gray-500':'',children:event.text}),event.time&&/*#__PURE__*/_jsx(\"span\",{className:\"text-xs bg-white px-1.5 py-0.5 rounded-full\",children:event.time})]})},`event-detail-${event.id||''}-${date}-${eventIndex}`))})]},`date-${date}-${dateIndex}`);})}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:t('itinerary.noItineraryDates','No itinerary dates available.')}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 text-sm mt-1\",children:t('itinerary.addTripDatesHint','Add trip start and end dates to see your itinerary.')})]})})]})]});}export default ItineraryView;","map":{"version":3,"names":["React","useState","useEffect","useMemo","DynamicCalendar","useI18n","jsx","_jsx","jsxs","_jsxs","ItineraryView","_ref","trip","tripTasks","selectedDate","setSelectedDate","dateEvents","setDateEvents","dailyItinerary","setDailyItinerary","t","startDate","structuredItinerary","length","itinerary","forEach","task","date","push","transports","transport","text","type","from","to","category","handleDateSelect","formatDate","dateString","Date","userLocale","navigator","language","toLocaleDateString","weekday","month","day","year","allDates","endDate","dates","currentDate","toISOString","split","setDate","getDate","calendarEvents","filter","className","children","events","onDateClick","sort","a","b","time","localeCompare","priorityOrder","high","medium","low","priority","map","event","index","completed","id","dateIndex","_dailyItinerary$date","_dailyItinerary$date2","onClick","eventIndex"],"sources":["C:/Users/juliu/Desktop/web/src/components/Itinerary/ItineraryView.jsx"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\r\nimport DynamicCalendar from '../Calendar/DynamicCalendar';\r\nimport { useI18n } from '../../utils/i18n'; // Import the i18n hook\r\n\r\nfunction ItineraryView({ trip, tripTasks = [] }) {\r\n  const [selectedDate, setSelectedDate] = useState(null);\r\n  const [dateEvents, setDateEvents] = useState([]);\r\n  const [dailyItinerary, setDailyItinerary] = useState({});\r\n  \r\n  // Get i18n functionality\r\n  const { t } = useI18n();\r\n  \r\n  // Set selected date to trip start date initially\r\n  useEffect(() => {\r\n    if (trip && trip.startDate && !selectedDate) {\r\n      setSelectedDate(trip.startDate);\r\n    }\r\n  }, [trip, selectedDate]);\r\n  \r\n  // Create a structured daily itinerary from tasks - using useMemo to prevent recreation on every render\r\n  const structuredItinerary = useMemo(() => {\r\n    if (!tripTasks || tripTasks.length === 0) return {};\r\n    \r\n    const itinerary = {};\r\n    \r\n    // Group tasks by date\r\n    tripTasks.forEach(task => {\r\n      if (task.date) {\r\n        if (!itinerary[task.date]) {\r\n          itinerary[task.date] = [];\r\n        }\r\n        itinerary[task.date].push(task);\r\n      }\r\n    });\r\n    \r\n    // Also add trip.transports that have a date property\r\n    if (trip.transports) {\r\n      trip.transports.forEach(transport => {\r\n        if (transport.date) {\r\n          if (!itinerary[transport.date]) {\r\n            itinerary[transport.date] = [];\r\n          }\r\n          itinerary[transport.date].push({\r\n            ...transport,\r\n            text: `${transport.type}: ${transport.from} ${t('itinerary.to', 'to')} ${transport.to}`,\r\n            category: 'transportation'\r\n          });\r\n        }\r\n      });\r\n    }\r\n    \r\n    return itinerary;\r\n  }, [tripTasks, trip.transports, t]); // Only recreate when these dependencies change\r\n  \r\n  // Update itinerary state when the memoized value changes\r\n  useEffect(() => {\r\n    setDailyItinerary(structuredItinerary);\r\n  }, [structuredItinerary]);\r\n  \r\n  // Update events for selected date when either selectedDate or dailyItinerary changes\r\n  useEffect(() => {\r\n    if (selectedDate) {\r\n      setDateEvents(dailyItinerary[selectedDate] || []);\r\n    }\r\n  }, [selectedDate, dailyItinerary]);\r\n  \r\n  // Handle date selection in calendar\r\n  const handleDateSelect = (date) => {\r\n    setSelectedDate(date);\r\n    // Events will be updated via the useEffect above\r\n  };\r\n  \r\n  // Format date for display\r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return '';\r\n    \r\n    const date = new Date(dateString);\r\n    // Get browser locale or use 'en-US' as fallback\r\n    const userLocale = navigator.language || 'en-US';\r\n    \r\n    return date.toLocaleDateString(userLocale, { \r\n      weekday: 'long',\r\n      month: 'long', \r\n      day: 'numeric',\r\n      year: 'numeric'\r\n    });\r\n  };\r\n  \r\n  // Add missing dates between start and end - memoized to avoid recreation on every render\r\n  const allDates = useMemo(() => {\r\n    if (!trip || !trip.startDate || !trip.endDate) return [];\r\n    \r\n    const dates = [];\r\n    const currentDate = new Date(trip.startDate);\r\n    const endDate = new Date(trip.endDate);\r\n    \r\n    while (currentDate <= endDate) {\r\n      dates.push(currentDate.toISOString().split('T')[0]);\r\n      currentDate.setDate(currentDate.getDate() + 1);\r\n    }\r\n    \r\n    return dates;\r\n  }, [trip?.startDate, trip?.endDate]); // Only recalculate when dates change\r\n  \r\n  // Prepare task events for calendar once - memoized to prevent recreation on every render\r\n  const calendarEvents = useMemo(() => {\r\n    return tripTasks.filter(task => task.date);\r\n  }, [tripTasks]);\r\n  \r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <h3 className=\"text-xl font-semibold text-gray-800\">{t('itinerary.title', 'Trip Itinerary')}</h3>\r\n      \r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6\">\r\n        {/* Calendar View */}\r\n        <div>\r\n          <h4 className=\"font-medium mb-3\">{t('itinerary.tripCalendar', 'Trip Calendar')}</h4>\r\n          <DynamicCalendar \r\n            startDate={trip.startDate} \r\n            endDate={trip.endDate} \r\n            events={calendarEvents} // Use memoized events\r\n            onDateClick={handleDateSelect}\r\n            selectedDate={selectedDate} // Pass this explicitly\r\n          />\r\n        </div>\r\n        \r\n        {/* Daily View */}\r\n        <div>\r\n          <h4 className=\"font-medium mb-3\">{t('itinerary.dailySchedule', 'Daily Schedule')}</h4>\r\n          {selectedDate ? (\r\n            <div className=\"bg-white border border-gray-200 rounded-lg overflow-hidden\">\r\n              <div className=\"bg-blue-50 px-4 py-3 border-b border-gray-200\">\r\n                <h5 className=\"font-medium text-blue-800\">\r\n                  {formatDate(selectedDate)}\r\n                </h5>\r\n              </div>\r\n              \r\n              <div className=\"p-4\">\r\n                {dateEvents.length > 0 ? (\r\n                  <div className=\"space-y-3\">\r\n                    {dateEvents\r\n                      .sort((a, b) => {\r\n                        // Sort by time if available, otherwise by priority\r\n                        if (a.time && b.time) return a.time.localeCompare(b.time);\r\n                        \r\n                        // Sort by priority\r\n                        const priorityOrder = { high: 0, medium: 1, low: 2 };\r\n                        return (priorityOrder[a.priority] || 1) - (priorityOrder[b.priority] || 1);\r\n                      })\r\n                      .map((event, index) => (\r\n                        <div \r\n                          // Use a stable unique key combining id, text, and index\r\n                          key={`event-${event.id || ''}-${selectedDate}-${index}`}\r\n                          className={`p-3 rounded-lg ${\r\n                            event.category === 'transportation' ? 'bg-green-50 border border-green-200' :\r\n                            event.completed ? 'bg-gray-50 border border-gray-200' : 'bg-blue-50 border border-blue-200'\r\n                          }`}\r\n                        >\r\n                          <div className=\"flex justify-between\">\r\n                            <div className={event.completed ? 'line-through text-gray-500' : 'font-medium'}>\r\n                              {event.text}\r\n                            </div>\r\n                            {event.time && (\r\n                              <div className=\"text-sm bg-white px-2 py-0.5 rounded-full\">\r\n                                {event.time}\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                          \r\n                          <div className=\"flex mt-2 text-xs\">\r\n                            <span className=\"px-2 py-0.5 bg-white rounded-full capitalize\">\r\n                              {t(`tasks.categories.${event.category}`, event.category)}\r\n                            </span>\r\n                            {event.priority && (\r\n                              <span className={`ml-2 px-2 py-0.5 rounded-full ${\r\n                                event.priority === 'high' ? 'bg-red-100 text-red-800' : \r\n                                event.priority === 'medium' ? 'bg-yellow-100 text-yellow-800' : \r\n                                'bg-green-100 text-green-800'\r\n                              }`}>\r\n                                {t(`tasks.priorities.${event.priority}`, event.priority)}\r\n                              </span>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      ))\r\n                    }\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-center py-8\">\r\n                    <p className=\"text-gray-500\">{t('itinerary.noEvents', 'No events scheduled for this day.')}</p>\r\n                    <p className=\"text-sm text-gray-400 mt-1\">\r\n                      {t('itinerary.addEventsHint', 'Add tasks or events with this date to see them here.')}\r\n                    </p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"bg-gray-50 p-4 rounded-lg text-center\">\r\n              <p className=\"text-gray-600\">{t('itinerary.selectDatePrompt', 'Select a date on the calendar to view events.')}</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Full Itinerary */}\r\n      <div>\r\n        <h4 className=\"font-medium mb-3\">{t('itinerary.completeItinerary', 'Complete Itinerary')}</h4>\r\n        <div className=\"bg-white border border-gray-200 rounded-lg overflow-hidden\">\r\n          {allDates.length > 0 ? (\r\n            <div className=\"divide-y divide-gray-200\">\r\n              {allDates.map((date, dateIndex) => (\r\n                <div \r\n                  key={`date-${date}-${dateIndex}`}\r\n                  className={`${selectedDate === date ? 'bg-blue-50' : ''}`}\r\n                >\r\n                  <div \r\n                    className=\"px-4 py-3 font-medium flex justify-between cursor-pointer hover:bg-gray-50\"\r\n                    onClick={() => handleDateSelect(date)}\r\n                  >\r\n                    <span>{formatDate(date)}</span>\r\n                    <span className=\"text-sm text-gray-500\">\r\n                      {dailyItinerary[date]?.length || 0} {t('itinerary.events', 'events')}\r\n                    </span>\r\n                  </div>\r\n                  \r\n                  {selectedDate === date && dailyItinerary[date]?.length > 0 && (\r\n                    <div className=\"p-3 space-y-2 border-t border-gray-100\">\r\n                      {dailyItinerary[date]\r\n                        .sort((a, b) => {\r\n                          // Sort by time if available, otherwise by priority\r\n                          if (a.time && b.time) return a.time.localeCompare(b.time);\r\n                          \r\n                          // Sort by priority\r\n                          const priorityOrder = { high: 0, medium: 1, low: 2 };\r\n                          return (priorityOrder[a.priority] || 1) - (priorityOrder[b.priority] || 1);\r\n                        })\r\n                        .map((event, eventIndex) => (\r\n                          <div \r\n                            key={`event-detail-${event.id || ''}-${date}-${eventIndex}`}\r\n                            className={`p-2 text-sm rounded ${\r\n                              event.category === 'transportation' ? 'bg-green-50' :\r\n                              event.completed ? 'bg-gray-50' : 'bg-blue-50'\r\n                            }`}\r\n                          >\r\n                            <div className=\"flex justify-between\">\r\n                              <span className={event.completed ? 'line-through text-gray-500' : ''}>\r\n                                {event.text}\r\n                              </span>\r\n                              {event.time && (\r\n                                <span className=\"text-xs bg-white px-1.5 py-0.5 rounded-full\">\r\n                                  {event.time}\r\n                                </span>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                        ))\r\n                      }\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-center py-8\">\r\n              <p className=\"text-gray-500\">{t('itinerary.noItineraryDates', 'No itinerary dates available.')}</p>\r\n              <p className=\"text-gray-400 text-sm mt-1\">\r\n                {t('itinerary.addTripDatesHint', 'Add trip start and end dates to see your itinerary.')}\r\n              </p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ItineraryView;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}