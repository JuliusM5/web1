{"ast":null,"code":"// src/services/offersService.js\n\n// Default offers if none exist in localStorage\nconst defaultOffers = [{\n  id: 1,\n  title: 'Summer in Paris',\n  destination: 'Paris, France',\n  description: 'Experience the beauty of Paris in summer with this special package including Eiffel Tower visit, Seine cruise, and more.',\n  price: 1200,\n  discountPercent: 15,\n  startDate: '2025-06-01',\n  endDate: '2025-08-31',\n  imageUrl: '/api/placeholder/800/400',\n  featured: true\n}, {\n  id: 2,\n  title: 'New York Weekend',\n  destination: 'New York, USA',\n  description: 'A quick weekend getaway to the Big Apple. Includes Broadway show tickets and Empire State Building entry.',\n  price: 850,\n  discountPercent: 0,\n  startDate: '2025-05-15',\n  endDate: '2025-12-15',\n  imageUrl: '/api/placeholder/800/400',\n  featured: false\n}, {\n  id: 3,\n  title: 'Tokyo Adventure',\n  destination: 'Tokyo, Japan',\n  description: 'Explore the fascinating culture of Tokyo with this comprehensive package including guided tours and authentic experiences.',\n  price: 1800,\n  discountPercent: 10,\n  startDate: '2025-09-01',\n  endDate: '2025-11-30',\n  imageUrl: '/api/placeholder/800/400',\n  featured: true\n}];\n\n// Keep a cached version of offers to avoid excessive localStorage access\nlet cachedOffers = null;\n\n// Initialize offers - only called once to set up default data\nexport const initializeOffers = () => {\n  if (cachedOffers !== null) {\n    return cachedOffers;\n  }\n  try {\n    const storedOffers = localStorage.getItem('offers');\n    if (!storedOffers) {\n      localStorage.setItem('offers', JSON.stringify(defaultOffers));\n      cachedOffers = [...defaultOffers];\n      return cachedOffers;\n    }\n    cachedOffers = JSON.parse(storedOffers);\n    return cachedOffers;\n  } catch (error) {\n    console.error('Error initializing offers:', error);\n    cachedOffers = [...defaultOffers];\n    return cachedOffers;\n  }\n};\n\n// Get all offers - uses cached version when available\nexport const getOffers = () => {\n  // Return cached offers if available\n  if (cachedOffers !== null) {\n    return cachedOffers;\n  }\n\n  // Initialize if not yet done\n  return initializeOffers();\n};\n\n// Get featured offers - derived from the main offers\nexport const getFeaturedOffers = () => {\n  const offers = getOffers();\n  return offers.filter(offer => offer.featured);\n};\n\n// Create new offer - updates both localStorage and cache\nexport const createOffer = offerData => {\n  try {\n    const offers = getOffers();\n\n    // Generate a new ID\n    const maxId = offers.reduce((max, offer) => offer.id > max ? offer.id : max, 0);\n    const newOffer = {\n      ...offerData,\n      id: maxId + 1\n    };\n\n    // Update cache and localStorage\n    cachedOffers = [...offers, newOffer];\n    localStorage.setItem('offers', JSON.stringify(cachedOffers));\n    return newOffer;\n  } catch (error) {\n    console.error('Error creating offer:', error);\n    throw error;\n  }\n};\n\n// Update existing offer - updates both localStorage and cache\nexport const updateOffer = (id, offerData) => {\n  try {\n    const offers = getOffers();\n    const updatedOffers = offers.map(offer => offer.id === id ? {\n      ...offer,\n      ...offerData,\n      id\n    } : offer);\n\n    // Update cache and localStorage\n    cachedOffers = updatedOffers;\n    localStorage.setItem('offers', JSON.stringify(updatedOffers));\n    return updatedOffers.find(offer => offer.id === id);\n  } catch (error) {\n    console.error('Error updating offer:', error);\n    throw error;\n  }\n};\n\n// Delete offer - updates both localStorage and cache\nexport const deleteOffer = id => {\n  try {\n    const offers = getOffers();\n    const updatedOffers = offers.filter(offer => offer.id !== id);\n\n    // Update cache and localStorage\n    cachedOffers = updatedOffers;\n    localStorage.setItem('offers', JSON.stringify(updatedOffers));\n    return true;\n  } catch (error) {\n    console.error('Error deleting offer:', error);\n    throw error;\n  }\n};\n\n// Search offers - doesn't modify any state\nexport const searchOffers = query => {\n  if (!query || query.trim() === '') return [];\n  const offers = getOffers();\n  const lowerQuery = query.toLowerCase();\n  return offers.filter(offer => offer.title.toLowerCase().includes(lowerQuery) || offer.destination.toLowerCase().includes(lowerQuery) || offer.description.toLowerCase().includes(lowerQuery));\n};\n\n// Reset offers to defaults (for testing)\nexport const resetOffers = () => {\n  cachedOffers = [...defaultOffers];\n  localStorage.setItem('offers', JSON.stringify(defaultOffers));\n  return [...defaultOffers];\n};","map":{"version":3,"names":["defaultOffers","id","title","destination","description","price","discountPercent","startDate","endDate","imageUrl","featured","cachedOffers","initializeOffers","storedOffers","localStorage","getItem","setItem","JSON","stringify","parse","error","console","getOffers","getFeaturedOffers","offers","filter","offer","createOffer","offerData","maxId","reduce","max","newOffer","updateOffer","updatedOffers","map","find","deleteOffer","searchOffers","query","trim","lowerQuery","toLowerCase","includes","resetOffers"],"sources":["C:/Users/juliu/Desktop/web/src/services/offersService.js"],"sourcesContent":["// src/services/offersService.js\r\n\r\n// Default offers if none exist in localStorage\r\nconst defaultOffers = [\r\n  {\r\n    id: 1,\r\n    title: 'Summer in Paris',\r\n    destination: 'Paris, France',\r\n    description: 'Experience the beauty of Paris in summer with this special package including Eiffel Tower visit, Seine cruise, and more.',\r\n    price: 1200,\r\n    discountPercent: 15,\r\n    startDate: '2025-06-01',\r\n    endDate: '2025-08-31',\r\n    imageUrl: '/api/placeholder/800/400',\r\n    featured: true\r\n  },\r\n  {\r\n    id: 2,\r\n    title: 'New York Weekend',\r\n    destination: 'New York, USA',\r\n    description: 'A quick weekend getaway to the Big Apple. Includes Broadway show tickets and Empire State Building entry.',\r\n    price: 850,\r\n    discountPercent: 0,\r\n    startDate: '2025-05-15',\r\n    endDate: '2025-12-15',\r\n    imageUrl: '/api/placeholder/800/400',\r\n    featured: false\r\n  },\r\n  {\r\n    id: 3,\r\n    title: 'Tokyo Adventure',\r\n    destination: 'Tokyo, Japan',\r\n    description: 'Explore the fascinating culture of Tokyo with this comprehensive package including guided tours and authentic experiences.',\r\n    price: 1800,\r\n    discountPercent: 10,\r\n    startDate: '2025-09-01',\r\n    endDate: '2025-11-30',\r\n    imageUrl: '/api/placeholder/800/400',\r\n    featured: true\r\n  }\r\n];\r\n\r\n// Keep a cached version of offers to avoid excessive localStorage access\r\nlet cachedOffers = null;\r\n\r\n// Initialize offers - only called once to set up default data\r\nexport const initializeOffers = () => {\r\n  if (cachedOffers !== null) {\r\n    return cachedOffers;\r\n  }\r\n  \r\n  try {\r\n    const storedOffers = localStorage.getItem('offers');\r\n    \r\n    if (!storedOffers) {\r\n      localStorage.setItem('offers', JSON.stringify(defaultOffers));\r\n      cachedOffers = [...defaultOffers];\r\n      return cachedOffers;\r\n    }\r\n    \r\n    cachedOffers = JSON.parse(storedOffers);\r\n    return cachedOffers;\r\n  } catch (error) {\r\n    console.error('Error initializing offers:', error);\r\n    cachedOffers = [...defaultOffers];\r\n    return cachedOffers;\r\n  }\r\n};\r\n\r\n// Get all offers - uses cached version when available\r\nexport const getOffers = () => {\r\n  // Return cached offers if available\r\n  if (cachedOffers !== null) {\r\n    return cachedOffers;\r\n  }\r\n  \r\n  // Initialize if not yet done\r\n  return initializeOffers();\r\n};\r\n\r\n// Get featured offers - derived from the main offers\r\nexport const getFeaturedOffers = () => {\r\n  const offers = getOffers();\r\n  return offers.filter(offer => offer.featured);\r\n};\r\n\r\n// Create new offer - updates both localStorage and cache\r\nexport const createOffer = (offerData) => {\r\n  try {\r\n    const offers = getOffers();\r\n    \r\n    // Generate a new ID\r\n    const maxId = offers.reduce((max, offer) => (offer.id > max ? offer.id : max), 0);\r\n    const newOffer = { ...offerData, id: maxId + 1 };\r\n    \r\n    // Update cache and localStorage\r\n    cachedOffers = [...offers, newOffer];\r\n    localStorage.setItem('offers', JSON.stringify(cachedOffers));\r\n    \r\n    return newOffer;\r\n  } catch (error) {\r\n    console.error('Error creating offer:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Update existing offer - updates both localStorage and cache\r\nexport const updateOffer = (id, offerData) => {\r\n  try {\r\n    const offers = getOffers();\r\n    const updatedOffers = offers.map(offer => \r\n      offer.id === id ? { ...offer, ...offerData, id } : offer\r\n    );\r\n    \r\n    // Update cache and localStorage\r\n    cachedOffers = updatedOffers;\r\n    localStorage.setItem('offers', JSON.stringify(updatedOffers));\r\n    \r\n    return updatedOffers.find(offer => offer.id === id);\r\n  } catch (error) {\r\n    console.error('Error updating offer:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Delete offer - updates both localStorage and cache\r\nexport const deleteOffer = (id) => {\r\n  try {\r\n    const offers = getOffers();\r\n    const updatedOffers = offers.filter(offer => offer.id !== id);\r\n    \r\n    // Update cache and localStorage\r\n    cachedOffers = updatedOffers;\r\n    localStorage.setItem('offers', JSON.stringify(updatedOffers));\r\n    \r\n    return true;\r\n  } catch (error) {\r\n    console.error('Error deleting offer:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Search offers - doesn't modify any state\r\nexport const searchOffers = (query) => {\r\n  if (!query || query.trim() === '') return [];\r\n  \r\n  const offers = getOffers();\r\n  const lowerQuery = query.toLowerCase();\r\n  \r\n  return offers.filter(offer => \r\n    offer.title.toLowerCase().includes(lowerQuery) ||\r\n    offer.destination.toLowerCase().includes(lowerQuery) ||\r\n    offer.description.toLowerCase().includes(lowerQuery)\r\n  );\r\n};\r\n\r\n// Reset offers to defaults (for testing)\r\nexport const resetOffers = () => {\r\n  cachedOffers = [...defaultOffers];\r\n  localStorage.setItem('offers', JSON.stringify(defaultOffers));\r\n  return [...defaultOffers];\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}