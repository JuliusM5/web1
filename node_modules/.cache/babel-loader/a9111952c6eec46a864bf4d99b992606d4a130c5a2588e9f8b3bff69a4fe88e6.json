{"ast":null,"code":"import React,{useState,useEffect}from'react';import{triggerSync}from'../../serviceWorkerRegistration';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function EnhancedOfflineIndicator(){const[isOffline,setIsOffline]=useState(!navigator.onLine);const[showIndicator,setShowIndicator]=useState(false);const[lastSynced,setLastSynced]=useState(localStorage.getItem('lastSyncTime')||null);const[unsyncedChanges,setUnsyncedChanges]=useState(0);const[showUpdatePrompt,setShowUpdatePrompt]=useState(false);// Update online/offline status\nuseEffect(()=>{const handleOnline=()=>{setIsOffline(false);setShowIndicator(true);// Trigger sync when coming back online\ntriggerSync();// Hide the indicator after 5 seconds when going back online\nconst timer=setTimeout(()=>{setShowIndicator(false);},5000);return()=>clearTimeout(timer);};const handleOffline=()=>{setIsOffline(true);setShowIndicator(true);};// Handle service worker updates\nconst handleServiceWorkerUpdated=()=>{setShowUpdatePrompt(true);};// Handle service worker installation\nconst handleServiceWorkerInstalled=()=>{// Show a notification that the app is now available offline\nif('serviceWorker'in navigator){const notification={title:'TravelEase',options:{body:'The app is now available for offline use.',icon:'/logo192.png',badge:'/favicon.ico'}};// Check if notification permission is granted\nif(Notification.permission==='granted'){navigator.serviceWorker.ready.then(registration=>{registration.showNotification(notification.title,notification.options);});}}};// Check for unsynced changes\nconst checkUnsyncedChanges=()=>{const unsynced=JSON.parse(localStorage.getItem('unsyncedChanges')||'[]');setUnsyncedChanges(unsynced.length);};// Listen for messages from service worker\nconst handleServiceWorkerMessage=event=>{if(event.data.type==='SYNC_COMPLETED'){setLastSynced(event.data.timestamp);checkUnsyncedChanges();}};// Set initial state\nsetIsOffline(!navigator.onLine);checkUnsyncedChanges();if(!navigator.onLine&&unsyncedChanges>0){setShowIndicator(true);}// Add event listeners\nwindow.addEventListener('online',handleOnline);window.addEventListener('offline',handleOffline);window.addEventListener('serviceWorkerUpdated',handleServiceWorkerUpdated);window.addEventListener('serviceWorkerInstalled',handleServiceWorkerInstalled);if('serviceWorker'in navigator&&navigator.serviceWorker.controller){navigator.serviceWorker.addEventListener('message',handleServiceWorkerMessage);}// Set up interval to check unsynced changes\nconst interval=setInterval(checkUnsyncedChanges,10000);// Check every 10 seconds\n// Clean up event listeners\nreturn()=>{window.removeEventListener('online',handleOnline);window.removeEventListener('offline',handleOffline);window.removeEventListener('serviceWorkerUpdated',handleServiceWorkerUpdated);window.removeEventListener('serviceWorkerInstalled',handleServiceWorkerInstalled);if('serviceWorker'in navigator&&navigator.serviceWorker.controller){navigator.serviceWorker.removeEventListener('message',handleServiceWorkerMessage);}clearInterval(interval);};},[unsyncedChanges]);// Format last synced time\nconst formatLastSynced=()=>{if(!lastSynced)return'Never';try{const date=new Date(lastSynced);return date.toLocaleString();}catch(error){return'Unknown';}};// Handle refresh for service worker update\nconst handleRefreshApp=()=>{// Skip waiting and reload to activate new service worker\nif('serviceWorker'in navigator&&navigator.serviceWorker.controller){navigator.serviceWorker.controller.postMessage({action:'skipWaiting'});}// Reload the page\nwindow.location.reload();};// Handle manual sync\nconst handleManualSync=()=>{if(navigator.onLine){triggerSync();// Show brief message\nconst syncMessage=document.getElementById('sync-message');if(syncMessage){syncMessage.classList.remove('opacity-0');syncMessage.classList.add('opacity-100');setTimeout(()=>{syncMessage.classList.remove('opacity-100');syncMessage.classList.add('opacity-0');},3000);}}};return/*#__PURE__*/_jsxs(_Fragment,{children:[showIndicator&&/*#__PURE__*/_jsxs(\"div\",{className:`fixed bottom-4 left-4 rounded-lg shadow-lg z-50 p-4 transition-all duration-300 ${isOffline?'bg-red-500 text-white':'bg-green-500 text-white'}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:`w-3 h-3 rounded-full mr-2 ${isOffline?'bg-red-200 animate-pulse':'bg-green-200'}`}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:isOffline?'You are offline':'Connected'}),!isOffline&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowIndicator(false),className:\"ml-4 text-white hover:text-gray-200\",\"aria-label\":\"Close\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M6 18L18 6M6 6l12 12\"})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs mt-1\",children:isOffline?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Changes will be saved locally and synchronized when you reconnect.\",/*#__PURE__*/_jsx(\"br\",{}),\"Last synced: \",formatLastSynced()]}),unsyncedChanges>0&&/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 font-bold\",children:[unsyncedChanges,\" change\",unsyncedChanges!==1?'s':'',\" pending synchronization\"]})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Your data has been synchronized.\"}),unsyncedChanges>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mt-1\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-bold mr-2\",children:[unsyncedChanges,\" change\",unsyncedChanges!==1?'s':'',\" pending synchronization\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleManualSync,className:\"bg-white text-green-600 px-2 py-0.5 rounded text-xs hover:bg-green-100\",children:\"Sync Now\"})]})]})})]}),showUpdatePrompt&&/*#__PURE__*/_jsxs(\"div\",{className:\"fixed bottom-4 right-4 rounded-lg shadow-lg z-50 p-4 bg-blue-600 text-white max-w-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:\"Update Available\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowUpdatePrompt(false),className:\"text-white hover:text-gray-200\",\"aria-label\":\"Close\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M6 18L18 6M6 6l12 12\"})})})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm mt-2\",children:\"A new version of TravelEase is available. Refresh to update.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleRefreshApp,className:\"mt-3 bg-white text-blue-600 px-3 py-1 rounded hover:bg-blue-50 w-full\",children:\"Update Now\"})]}),/*#__PURE__*/_jsx(\"div\",{id:\"sync-message\",className:\"fixed top-4 right-4 bg-blue-600 text-white px-4 py-2 rounded shadow-lg z-50 opacity-0 transition-opacity duration-300\",children:\"Synchronizing data...\"})]});}export default EnhancedOfflineIndicator;","map":{"version":3,"names":["React","useState","useEffect","triggerSync","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","EnhancedOfflineIndicator","isOffline","setIsOffline","navigator","onLine","showIndicator","setShowIndicator","lastSynced","setLastSynced","localStorage","getItem","unsyncedChanges","setUnsyncedChanges","showUpdatePrompt","setShowUpdatePrompt","handleOnline","timer","setTimeout","clearTimeout","handleOffline","handleServiceWorkerUpdated","handleServiceWorkerInstalled","notification","title","options","body","icon","badge","Notification","permission","serviceWorker","ready","then","registration","showNotification","checkUnsyncedChanges","unsynced","JSON","parse","length","handleServiceWorkerMessage","event","data","type","timestamp","window","addEventListener","controller","interval","setInterval","removeEventListener","clearInterval","formatLastSynced","date","Date","toLocaleString","error","handleRefreshApp","postMessage","action","location","reload","handleManualSync","syncMessage","document","getElementById","classList","remove","add","children","className","onClick","fill","stroke","viewBox","xmlns","strokeLinecap","strokeLinejoin","strokeWidth","d","id"],"sources":["C:/Users/juliu/Desktop/web/src/components/Offline/EnhancedOfflineIndicator.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { triggerSync } from '../../serviceWorkerRegistration';\r\n\r\nfunction EnhancedOfflineIndicator() {\r\n  const [isOffline, setIsOffline] = useState(!navigator.onLine);\r\n  const [showIndicator, setShowIndicator] = useState(false);\r\n  const [lastSynced, setLastSynced] = useState(localStorage.getItem('lastSyncTime') || null);\r\n  const [unsyncedChanges, setUnsyncedChanges] = useState(0);\r\n  const [showUpdatePrompt, setShowUpdatePrompt] = useState(false);\r\n  \r\n  // Update online/offline status\r\n  useEffect(() => {\r\n    const handleOnline = () => {\r\n      setIsOffline(false);\r\n      setShowIndicator(true);\r\n      \r\n      // Trigger sync when coming back online\r\n      triggerSync();\r\n      \r\n      // Hide the indicator after 5 seconds when going back online\r\n      const timer = setTimeout(() => {\r\n        setShowIndicator(false);\r\n      }, 5000);\r\n      \r\n      return () => clearTimeout(timer);\r\n    };\r\n    \r\n    const handleOffline = () => {\r\n      setIsOffline(true);\r\n      setShowIndicator(true);\r\n    };\r\n    \r\n    // Handle service worker updates\r\n    const handleServiceWorkerUpdated = () => {\r\n      setShowUpdatePrompt(true);\r\n    };\r\n    \r\n    // Handle service worker installation\r\n    const handleServiceWorkerInstalled = () => {\r\n      // Show a notification that the app is now available offline\r\n      if ('serviceWorker' in navigator) {\r\n        const notification = {\r\n          title: 'TravelEase',\r\n          options: {\r\n            body: 'The app is now available for offline use.',\r\n            icon: '/logo192.png',\r\n            badge: '/favicon.ico'\r\n          }\r\n        };\r\n        \r\n        // Check if notification permission is granted\r\n        if (Notification.permission === 'granted') {\r\n          navigator.serviceWorker.ready.then(registration => {\r\n            registration.showNotification(notification.title, notification.options);\r\n          });\r\n        }\r\n      }\r\n    };\r\n    \r\n    // Check for unsynced changes\r\n    const checkUnsyncedChanges = () => {\r\n      const unsynced = JSON.parse(localStorage.getItem('unsyncedChanges') || '[]');\r\n      setUnsyncedChanges(unsynced.length);\r\n    };\r\n    \r\n    // Listen for messages from service worker\r\n    const handleServiceWorkerMessage = (event) => {\r\n      if (event.data.type === 'SYNC_COMPLETED') {\r\n        setLastSynced(event.data.timestamp);\r\n        checkUnsyncedChanges();\r\n      }\r\n    };\r\n    \r\n    // Set initial state\r\n    setIsOffline(!navigator.onLine);\r\n    checkUnsyncedChanges();\r\n    \r\n    if (!navigator.onLine && unsyncedChanges > 0) {\r\n      setShowIndicator(true);\r\n    }\r\n    \r\n    // Add event listeners\r\n    window.addEventListener('online', handleOnline);\r\n    window.addEventListener('offline', handleOffline);\r\n    window.addEventListener('serviceWorkerUpdated', handleServiceWorkerUpdated);\r\n    window.addEventListener('serviceWorkerInstalled', handleServiceWorkerInstalled);\r\n    \r\n    if ('serviceWorker' in navigator && navigator.serviceWorker.controller) {\r\n      navigator.serviceWorker.addEventListener('message', handleServiceWorkerMessage);\r\n    }\r\n    \r\n    // Set up interval to check unsynced changes\r\n    const interval = setInterval(checkUnsyncedChanges, 10000); // Check every 10 seconds\r\n    \r\n    // Clean up event listeners\r\n    return () => {\r\n      window.removeEventListener('online', handleOnline);\r\n      window.removeEventListener('offline', handleOffline);\r\n      window.removeEventListener('serviceWorkerUpdated', handleServiceWorkerUpdated);\r\n      window.removeEventListener('serviceWorkerInstalled', handleServiceWorkerInstalled);\r\n      \r\n      if ('serviceWorker' in navigator && navigator.serviceWorker.controller) {\r\n        navigator.serviceWorker.removeEventListener('message', handleServiceWorkerMessage);\r\n      }\r\n      \r\n      clearInterval(interval);\r\n    };\r\n  }, [unsyncedChanges]);\r\n  \r\n  // Format last synced time\r\n  const formatLastSynced = () => {\r\n    if (!lastSynced) return 'Never';\r\n    \r\n    try {\r\n      const date = new Date(lastSynced);\r\n      return date.toLocaleString();\r\n    } catch (error) {\r\n      return 'Unknown';\r\n    }\r\n  };\r\n  \r\n  // Handle refresh for service worker update\r\n  const handleRefreshApp = () => {\r\n    // Skip waiting and reload to activate new service worker\r\n    if ('serviceWorker' in navigator && navigator.serviceWorker.controller) {\r\n      navigator.serviceWorker.controller.postMessage({ action: 'skipWaiting' });\r\n    }\r\n    \r\n    // Reload the page\r\n    window.location.reload();\r\n  };\r\n  \r\n  // Handle manual sync\r\n  const handleManualSync = () => {\r\n    if (navigator.onLine) {\r\n      triggerSync();\r\n      \r\n      // Show brief message\r\n      const syncMessage = document.getElementById('sync-message');\r\n      if (syncMessage) {\r\n        syncMessage.classList.remove('opacity-0');\r\n        syncMessage.classList.add('opacity-100');\r\n        \r\n        setTimeout(() => {\r\n          syncMessage.classList.remove('opacity-100');\r\n          syncMessage.classList.add('opacity-0');\r\n        }, 3000);\r\n      }\r\n    }\r\n  };\r\n  \r\n  return (\r\n    <>\r\n      {/* Offline/Online Indicator */}\r\n      {showIndicator && (\r\n        <div className={`fixed bottom-4 left-4 rounded-lg shadow-lg z-50 p-4 transition-all duration-300 ${\r\n          isOffline ? 'bg-red-500 text-white' : 'bg-green-500 text-white'\r\n        }`}>\r\n          <div className=\"flex items-center\">\r\n            <div className={`w-3 h-3 rounded-full mr-2 ${\r\n              isOffline ? 'bg-red-200 animate-pulse' : 'bg-green-200'\r\n            }`}></div>\r\n            <p className=\"font-medium\">\r\n              {isOffline ? 'You are offline' : 'Connected'}\r\n            </p>\r\n            {!isOffline && (\r\n              <button\r\n                onClick={() => setShowIndicator(false)}\r\n                className=\"ml-4 text-white hover:text-gray-200\"\r\n                aria-label=\"Close\"\r\n              >\r\n                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\r\n                </svg>\r\n              </button>\r\n            )}\r\n          </div>\r\n          \r\n          <div className=\"text-xs mt-1\">\r\n            {isOffline ? (\r\n              <div>\r\n                <p>\r\n                  Changes will be saved locally and synchronized when you reconnect.\r\n                  <br />\r\n                  Last synced: {formatLastSynced()}\r\n                </p>\r\n                {unsyncedChanges > 0 && (\r\n                  <p className=\"mt-1 font-bold\">\r\n                    {unsyncedChanges} change{unsyncedChanges !== 1 ? 's' : ''} pending synchronization\r\n                  </p>\r\n                )}\r\n              </div>\r\n            ) : (\r\n              <div>\r\n                <p>Your data has been synchronized.</p>\r\n                {unsyncedChanges > 0 && (\r\n                  <div className=\"flex items-center mt-1\">\r\n                    <p className=\"font-bold mr-2\">\r\n                      {unsyncedChanges} change{unsyncedChanges !== 1 ? 's' : ''} pending synchronization\r\n                    </p>\r\n                    <button\r\n                      onClick={handleManualSync}\r\n                      className=\"bg-white text-green-600 px-2 py-0.5 rounded text-xs hover:bg-green-100\"\r\n                    >\r\n                      Sync Now\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {/* Update Prompt */}\r\n      {showUpdatePrompt && (\r\n        <div className=\"fixed bottom-4 right-4 rounded-lg shadow-lg z-50 p-4 bg-blue-600 text-white max-w-sm\">\r\n          <div className=\"flex justify-between items-start\">\r\n            <div className=\"flex items-center\">\r\n              <svg className=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\r\n              </svg>\r\n              <p className=\"font-medium\">Update Available</p>\r\n            </div>\r\n            <button\r\n              onClick={() => setShowUpdatePrompt(false)}\r\n              className=\"text-white hover:text-gray-200\"\r\n              aria-label=\"Close\"\r\n            >\r\n              <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\r\n              </svg>\r\n            </button>\r\n          </div>\r\n          \r\n          <p className=\"text-sm mt-2\">\r\n            A new version of TravelEase is available. Refresh to update.\r\n          </p>\r\n          \r\n          <button\r\n            onClick={handleRefreshApp}\r\n            className=\"mt-3 bg-white text-blue-600 px-3 py-1 rounded hover:bg-blue-50 w-full\"\r\n          >\r\n            Update Now\r\n          </button>\r\n        </div>\r\n      )}\r\n      \r\n      {/* Sync Message (hidden by default) */}\r\n      <div \r\n        id=\"sync-message\" \r\n        className=\"fixed top-4 right-4 bg-blue-600 text-white px-4 py-2 rounded shadow-lg z-50 opacity-0 transition-opacity duration-300\"\r\n      >\r\n        Synchronizing data...\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default EnhancedOfflineIndicator;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}