{"ast":null,"code":"import React from'react';import{useAppSettings}from'../../utils/useAppSettings';import{useI18n}from'../../utils/i18n';// Import the i18n hook\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function BudgetChart(_ref){let{budgetData}=_ref;// Get currency formatter from app settings\nconst{currency}=useAppSettings();// Get i18n functionality\nconst{t}=useI18n();// Format the data for the chart\nconst chartData=Object.entries(budgetData).filter(_ref2=>{let[_,value]=_ref2;return value>0;}).map(_ref3=>{let[category,value]=_ref3;return{category:t(`budget.${category}`),// Translate category names\ncategoryKey:category,// Keep original key for color\nvalue,percentage:0,// We'll calculate this\ncolor:getCategoryColor(category)};});// Calculate total and percentages\nconst total=chartData.reduce((sum,item)=>sum+item.value,0);chartData.forEach(item=>{item.percentage=Math.round(item.value/total*100);});// Sort by value (largest first)\nchartData.sort((a,b)=>b.value-a.value);// Get color for category\nfunction getCategoryColor(category){switch(category){case'accommodation':return'#3b82f6';// blue-500\ncase'food':return'#f59e0b';// amber-500\ncase'transportation':return'#10b981';// emerald-500\ncase'activities':return'#8b5cf6';// violet-500\ncase'other':return'#6b7280';// gray-500\ndefault:return'#d1d5db';// gray-300\n}}return/*#__PURE__*/_jsx(\"div\",{children:chartData.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-48 bg-gray-50 rounded-lg border border-gray-200\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-500 text-center\",children:[t('budget.noData.line1','No budget data to display.'),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:t('budget.noData.line2','Add budget items to see the chart.')})]})}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"relative h-48 w-48 mx-auto\",children:/*#__PURE__*/_jsxs(\"svg\",{viewBox:\"0 0 100 100\",className:\"w-full h-full\",children:[renderPieSlices(chartData),/*#__PURE__*/_jsx(\"circle\",{cx:\"50\",cy:\"50\",r:\"25\",fill:\"white\"}),/*#__PURE__*/_jsx(\"text\",{x:\"50\",y:\"46\",textAnchor:\"middle\",fontSize:\"10\",fontWeight:\"bold\",children:currency(total)}),/*#__PURE__*/_jsx(\"text\",{x:\"50\",y:\"58\",textAnchor:\"middle\",fontSize:\"6\",children:t('budget.totalBudget','Total Budget')})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 space-y-2\",children:chartData.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 rounded-sm mr-2\",style:{backgroundColor:item.color}}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:item.category})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium mr-2\",children:currency(item.value)}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-gray-500\",children:[\"(\",item.percentage,\"%)\"]})]})]},index))})]})});}// Helper function to render pie slices\nfunction renderPieSlices(data){const total=data.reduce((sum,item)=>sum+item.value,0);let startAngle=0;return data.map((item,index)=>{// Calculate angles for the slice\nconst percentage=item.value/total;const angle=percentage*360;const endAngle=startAngle+angle;// Convert angles to radians and calculate coordinates\nconst startRad=(startAngle-90)*Math.PI/180;const endRad=(endAngle-90)*Math.PI/180;const x1=50+40*Math.cos(startRad);const y1=50+40*Math.sin(startRad);const x2=50+40*Math.cos(endRad);const y2=50+40*Math.sin(endRad);// Create SVG arc path\nconst largeArcFlag=angle>180?1:0;const pathData=[`M 50 50`,`L ${x1} ${y1}`,`A 40 40 0 ${largeArcFlag} 1 ${x2} ${y2}`,`Z`].join(' ');// Update the start angle for the next slice\nstartAngle=endAngle;return/*#__PURE__*/_jsx(\"path\",{d:pathData,fill:item.color,stroke:\"white\",strokeWidth:\"1\"},index);});}export default BudgetChart;","map":{"version":3,"names":["React","useAppSettings","useI18n","jsx","_jsx","jsxs","_jsxs","BudgetChart","_ref","budgetData","currency","t","chartData","Object","entries","filter","_ref2","_","value","map","_ref3","category","categoryKey","percentage","color","getCategoryColor","total","reduce","sum","item","forEach","Math","round","sort","a","b","children","length","className","viewBox","renderPieSlices","cx","cy","r","fill","x","y","textAnchor","fontSize","fontWeight","index","style","backgroundColor","data","startAngle","angle","endAngle","startRad","PI","endRad","x1","cos","y1","sin","x2","y2","largeArcFlag","pathData","join","d","stroke","strokeWidth"],"sources":["C:/Users/juliu/Desktop/web/src/components/Budget/BudgetChart.jsx"],"sourcesContent":["import React from 'react';\r\nimport { useAppSettings } from '../../utils/useAppSettings';\r\nimport { useI18n } from '../../utils/i18n'; // Import the i18n hook\r\n\r\nfunction BudgetChart({ budgetData }) {\r\n  // Get currency formatter from app settings\r\n  const { currency } = useAppSettings();\r\n  // Get i18n functionality\r\n  const { t } = useI18n();\r\n\r\n  // Format the data for the chart\r\n  const chartData = Object.entries(budgetData)\r\n    .filter(([_, value]) => value > 0)\r\n    .map(([category, value]) => ({\r\n      category: t(`budget.${category}`), // Translate category names\r\n      categoryKey: category, // Keep original key for color\r\n      value,\r\n      percentage: 0, // We'll calculate this\r\n      color: getCategoryColor(category)\r\n    }));\r\n  \r\n  // Calculate total and percentages\r\n  const total = chartData.reduce((sum, item) => sum + item.value, 0);\r\n  chartData.forEach(item => {\r\n    item.percentage = Math.round((item.value / total) * 100);\r\n  });\r\n  \r\n  // Sort by value (largest first)\r\n  chartData.sort((a, b) => b.value - a.value);\r\n\r\n  // Get color for category\r\n  function getCategoryColor(category) {\r\n    switch (category) {\r\n      case 'accommodation':\r\n        return '#3b82f6'; // blue-500\r\n      case 'food':\r\n        return '#f59e0b'; // amber-500\r\n      case 'transportation':\r\n        return '#10b981'; // emerald-500\r\n      case 'activities':\r\n        return '#8b5cf6'; // violet-500\r\n      case 'other':\r\n        return '#6b7280'; // gray-500\r\n      default:\r\n        return '#d1d5db'; // gray-300\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {chartData.length === 0 ? (\r\n        <div className=\"flex items-center justify-center h-48 bg-gray-50 rounded-lg border border-gray-200\">\r\n          <p className=\"text-gray-500 text-center\">\r\n            {t('budget.noData.line1', 'No budget data to display.')}<br />\r\n            <span className=\"text-sm\">{t('budget.noData.line2', 'Add budget items to see the chart.')}</span>\r\n          </p>\r\n        </div>\r\n      ) : (\r\n        <div>\r\n          {/* Pie Chart Visualization */}\r\n          <div className=\"relative h-48 w-48 mx-auto\">\r\n            <svg viewBox=\"0 0 100 100\" className=\"w-full h-full\">\r\n              {/* Create pie slices */}\r\n              {renderPieSlices(chartData)}\r\n              \r\n              {/* Center circle (empty space) */}\r\n              <circle cx=\"50\" cy=\"50\" r=\"25\" fill=\"white\" />\r\n              \r\n              {/* Total amount in center */}\r\n              <text x=\"50\" y=\"46\" textAnchor=\"middle\" fontSize=\"10\" fontWeight=\"bold\">\r\n                {currency(total)}\r\n              </text>\r\n              <text x=\"50\" y=\"58\" textAnchor=\"middle\" fontSize=\"6\">\r\n                {t('budget.totalBudget', 'Total Budget')}\r\n              </text>\r\n            </svg>\r\n          </div>\r\n          \r\n          {/* Legend */}\r\n          <div className=\"mt-4 space-y-2\">\r\n            {chartData.map((item, index) => (\r\n              <div key={index} className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center\">\r\n                  <div \r\n                    className=\"w-4 h-4 rounded-sm mr-2\"\r\n                    style={{ backgroundColor: item.color }}\r\n                  ></div>\r\n                  <span className=\"text-sm\">{item.category}</span>\r\n                </div>\r\n                <div className=\"flex items-center\">\r\n                  <span className=\"text-sm font-medium mr-2\">{currency(item.value)}</span>\r\n                  <span className=\"text-xs text-gray-500\">({item.percentage}%)</span>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n// Helper function to render pie slices\r\nfunction renderPieSlices(data) {\r\n  const total = data.reduce((sum, item) => sum + item.value, 0);\r\n  let startAngle = 0;\r\n  \r\n  return data.map((item, index) => {\r\n    // Calculate angles for the slice\r\n    const percentage = item.value / total;\r\n    const angle = percentage * 360;\r\n    const endAngle = startAngle + angle;\r\n    \r\n    // Convert angles to radians and calculate coordinates\r\n    const startRad = (startAngle - 90) * Math.PI / 180;\r\n    const endRad = (endAngle - 90) * Math.PI / 180;\r\n    \r\n    const x1 = 50 + 40 * Math.cos(startRad);\r\n    const y1 = 50 + 40 * Math.sin(startRad);\r\n    const x2 = 50 + 40 * Math.cos(endRad);\r\n    const y2 = 50 + 40 * Math.sin(endRad);\r\n    \r\n    // Create SVG arc path\r\n    const largeArcFlag = angle > 180 ? 1 : 0;\r\n    const pathData = [\r\n      `M 50 50`,\r\n      `L ${x1} ${y1}`,\r\n      `A 40 40 0 ${largeArcFlag} 1 ${x2} ${y2}`,\r\n      `Z`\r\n    ].join(' ');\r\n    \r\n    // Update the start angle for the next slice\r\n    startAngle = endAngle;\r\n    \r\n    return (\r\n      <path \r\n        key={index}\r\n        d={pathData} \r\n        fill={item.color}\r\n        stroke=\"white\"\r\n        strokeWidth=\"1\"\r\n      />\r\n    );\r\n  });\r\n}\r\n\r\nexport default BudgetChart;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}