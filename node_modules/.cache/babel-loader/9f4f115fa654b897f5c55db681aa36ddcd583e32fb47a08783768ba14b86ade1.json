{"ast":null,"code":"// src/services/analyticsService.js\n// npm install amplitude-js mixpanel-browser\nimport amplitude from 'amplitude-js';\nimport mixpanel from 'mixpanel-browser';\nclass AnalyticsService {\n  constructor() {\n    this.initialized = false;\n    this.providers = [];\n  }\n  init() {\n    if (this.initialized) return;\n\n    // Only initialize in production or when testing analytics\n    if (process.env.NODE_ENV === 'production' || process.env.REACT_APP_ENABLE_ANALYTICS === 'true') {\n      // Initialize Amplitude\n      if (process.env.REACT_APP_AMPLITUDE_API_KEY) {\n        amplitude.getInstance().init(process.env.REACT_APP_AMPLITUDE_API_KEY);\n        this.providers.push('amplitude');\n      }\n\n      // Initialize Mixpanel\n      if (process.env.REACT_APP_MIXPANEL_TOKEN) {\n        mixpanel.init(process.env.REACT_APP_MIXPANEL_TOKEN);\n        this.providers.push('mixpanel');\n      }\n      this.initialized = true;\n      console.log('Analytics initialized with providers:', this.providers);\n    }\n  }\n\n  // Set user properties\n  identify(userId, userProperties = {}) {\n    if (!this.initialized) return;\n    if (this.providers.includes('amplitude')) {\n      amplitude.getInstance().setUserId(userId);\n      amplitude.getInstance().setUserProperties(userProperties);\n    }\n    if (this.providers.includes('mixpanel')) {\n      mixpanel.identify(userId);\n      mixpanel.people.set(userProperties);\n    }\n  }\n\n  // Track events\n  trackEvent(eventName, eventProperties = {}) {\n    if (!this.initialized) return;\n    if (this.providers.includes('amplitude')) {\n      amplitude.getInstance().logEvent(eventName, eventProperties);\n    }\n    if (this.providers.includes('mixpanel')) {\n      mixpanel.track(eventName, eventProperties);\n    }\n    console.log(`[Analytics] Tracked event: ${eventName}`, eventProperties);\n  }\n\n  // Subscription-specific tracking methods\n  trackSubscriptionStarted(planId, price, platform, isNewUser = true) {\n    this.trackEvent('subscription_started', {\n      plan_id: planId,\n      price,\n      platform,\n      is_new_user: isNewUser\n    });\n  }\n  trackSubscriptionCancelled(planId, reason, daysSinceSubscribed) {\n    this.trackEvent('subscription_cancelled', {\n      plan_id: planId,\n      reason,\n      days_since_subscribed: daysSinceSubscribed\n    });\n  }\n  trackSubscriptionRenewed(planId, renewalCount) {\n    this.trackEvent('subscription_renewed', {\n      plan_id: planId,\n      renewal_count: renewalCount\n    });\n  }\n  trackCodeActivated(platform, daysRemaining) {\n    this.trackEvent('code_activated', {\n      platform,\n      days_remaining: daysRemaining\n    });\n  }\n  trackPremiumFeatureUsed(featureName) {\n    this.trackEvent('premium_feature_used', {\n      feature_name: featureName\n    });\n  }\n  trackSubscriptionPageView(source) {\n    this.trackEvent('subscription_page_viewed', {\n      source\n    });\n  }\n\n  // Clear user data on logout\n  clearUserData() {\n    if (!this.initialized) return;\n    if (this.providers.includes('amplitude')) {\n      amplitude.getInstance().setUserId(null);\n      amplitude.getInstance().regenerateDeviceId();\n    }\n    if (this.providers.includes('mixpanel')) {\n      mixpanel.reset();\n    }\n  }\n}\nexport default new AnalyticsService();","map":{"version":3,"names":["amplitude","mixpanel","AnalyticsService","constructor","initialized","providers","init","process","env","NODE_ENV","REACT_APP_ENABLE_ANALYTICS","REACT_APP_AMPLITUDE_API_KEY","getInstance","push","REACT_APP_MIXPANEL_TOKEN","console","log","identify","userId","userProperties","includes","setUserId","setUserProperties","people","set","trackEvent","eventName","eventProperties","logEvent","track","trackSubscriptionStarted","planId","price","platform","isNewUser","plan_id","is_new_user","trackSubscriptionCancelled","reason","daysSinceSubscribed","days_since_subscribed","trackSubscriptionRenewed","renewalCount","renewal_count","trackCodeActivated","daysRemaining","days_remaining","trackPremiumFeatureUsed","featureName","feature_name","trackSubscriptionPageView","source","clearUserData","regenerateDeviceId","reset"],"sources":["C:/Users/juliu/Desktop/web/src/services/analyticsService.js"],"sourcesContent":["// src/services/analyticsService.js\r\n// npm install amplitude-js mixpanel-browser\r\nimport amplitude from 'amplitude-js';\r\nimport mixpanel from 'mixpanel-browser';\r\n\r\nclass AnalyticsService {\r\n  constructor() {\r\n    this.initialized = false;\r\n    this.providers = [];\r\n  }\r\n\r\n  init() {\r\n    if (this.initialized) return;\r\n    \r\n    // Only initialize in production or when testing analytics\r\n    if (process.env.NODE_ENV === 'production' || process.env.REACT_APP_ENABLE_ANALYTICS === 'true') {\r\n      // Initialize Amplitude\r\n      if (process.env.REACT_APP_AMPLITUDE_API_KEY) {\r\n        amplitude.getInstance().init(process.env.REACT_APP_AMPLITUDE_API_KEY);\r\n        this.providers.push('amplitude');\r\n      }\r\n      \r\n      // Initialize Mixpanel\r\n      if (process.env.REACT_APP_MIXPANEL_TOKEN) {\r\n        mixpanel.init(process.env.REACT_APP_MIXPANEL_TOKEN);\r\n        this.providers.push('mixpanel');\r\n      }\r\n      \r\n      this.initialized = true;\r\n      console.log('Analytics initialized with providers:', this.providers);\r\n    }\r\n  }\r\n\r\n  // Set user properties\r\n  identify(userId, userProperties = {}) {\r\n    if (!this.initialized) return;\r\n    \r\n    if (this.providers.includes('amplitude')) {\r\n      amplitude.getInstance().setUserId(userId);\r\n      amplitude.getInstance().setUserProperties(userProperties);\r\n    }\r\n    \r\n    if (this.providers.includes('mixpanel')) {\r\n      mixpanel.identify(userId);\r\n      mixpanel.people.set(userProperties);\r\n    }\r\n  }\r\n\r\n  // Track events\r\n  trackEvent(eventName, eventProperties = {}) {\r\n    if (!this.initialized) return;\r\n    \r\n    if (this.providers.includes('amplitude')) {\r\n      amplitude.getInstance().logEvent(eventName, eventProperties);\r\n    }\r\n    \r\n    if (this.providers.includes('mixpanel')) {\r\n      mixpanel.track(eventName, eventProperties);\r\n    }\r\n    \r\n    console.log(`[Analytics] Tracked event: ${eventName}`, eventProperties);\r\n  }\r\n\r\n  // Subscription-specific tracking methods\r\n  trackSubscriptionStarted(planId, price, platform, isNewUser = true) {\r\n    this.trackEvent('subscription_started', {\r\n      plan_id: planId,\r\n      price,\r\n      platform,\r\n      is_new_user: isNewUser\r\n    });\r\n  }\r\n\r\n  trackSubscriptionCancelled(planId, reason, daysSinceSubscribed) {\r\n    this.trackEvent('subscription_cancelled', {\r\n      plan_id: planId,\r\n      reason,\r\n      days_since_subscribed: daysSinceSubscribed\r\n    });\r\n  }\r\n\r\n  trackSubscriptionRenewed(planId, renewalCount) {\r\n    this.trackEvent('subscription_renewed', {\r\n      plan_id: planId,\r\n      renewal_count: renewalCount\r\n    });\r\n  }\r\n\r\n  trackCodeActivated(platform, daysRemaining) {\r\n    this.trackEvent('code_activated', {\r\n      platform,\r\n      days_remaining: daysRemaining\r\n    });\r\n  }\r\n\r\n  trackPremiumFeatureUsed(featureName) {\r\n    this.trackEvent('premium_feature_used', {\r\n      feature_name: featureName\r\n    });\r\n  }\r\n\r\n  trackSubscriptionPageView(source) {\r\n    this.trackEvent('subscription_page_viewed', {\r\n      source\r\n    });\r\n  }\r\n\r\n  // Clear user data on logout\r\n  clearUserData() {\r\n    if (!this.initialized) return;\r\n    \r\n    if (this.providers.includes('amplitude')) {\r\n      amplitude.getInstance().setUserId(null);\r\n      amplitude.getInstance().regenerateDeviceId();\r\n    }\r\n    \r\n    if (this.providers.includes('mixpanel')) {\r\n      mixpanel.reset();\r\n    }\r\n  }\r\n}\r\n\r\nexport default new AnalyticsService();"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}